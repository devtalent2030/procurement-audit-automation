<nav class="site-nav" role="navigation" aria-label="Primary">
  <div class="nav-container">
    <a href="{{ '/' | relative_url }}" class="nav-logo" aria-label="AuditAuto Home">AuditAuto</a>

    <!-- Mobile toggle -->
    <button
      class="nav-toggle"
      type="button"
      aria-label="Toggle navigation"
      aria-controls="primary-nav"
      aria-expanded="false"
    >
      <span class="nav-toggle-bar"></span>
      <span class="nav-toggle-bar"></span>
      <span class="nav-toggle-bar"></span>
    </button>

    <ul class="nav-links" id="primary-nav">
      <li><a href="{{ '/' | relative_url }}" class="{% if page.url == '/' %}active{% endif %}">Home</a></li>
      <li><a href="{{ '/architecture/' | relative_url }}" class="{% if page.url contains '/architecture/' %}active{% endif %}">Architecture</a></li>
      <li><a href="{{ '/logic_engine_concepts/' | relative_url }}" class="{% if page.url contains '/logic_engine_concepts/' %}active{% endif %}">Engine</a></li>
      <li><a href="{{ '/data_generator/' | relative_url }}" class="{% if page.url contains '/data_generator/' %}active{% endif %}">Data Gen</a></li>
      <li><a href="{{ '/foip_pii_scanner/' | relative_url }}" class="{% if page.url contains '/foip_pii_scanner/' %}active{% endif %}">FOIP Scanner</a></li>
      <li><a href="{{ '/testing_ci/' | relative_url }}" class="{% if page.url contains '/testing_ci/' %}active{% endif %}">Testing &amp; CI</a></li>
      <li><a href="{{ '/demo/' | relative_url }}" class="{% if page.url contains '/demo/' %}active{% endif %}">Demo</a></li>
    </ul>
  </div>
</nav>

<script>
  (function () {
    const toggle = document.querySelector(".nav-toggle");
    const nav = document.getElementById("primary-nav");
    if (!toggle || !nav) return;

    toggle.addEventListener("click", () => {
      const isOpen = nav.classList.toggle("is-open");
      toggle.setAttribute("aria-expanded", String(isOpen));
    });

    // Close on link click (mobile)
    nav.querySelectorAll("a").forEach((a) => {
      a.addEventListener("click", () => {
        nav.classList.remove("is-open");
        toggle.setAttribute("aria-expanded", "false");
      });
    });
  })();
</script>
